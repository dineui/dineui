import sharp from 'sharp'

export default async function (req, res) {
  const result = await sharp(
    Buffer.from(
      `<svg width="1200" height="630" viewBox="0 0 1200 630" xmlns="http://www.w3.org/2000/svg"><rect x="0" y="0" width="1200" height="530" fill="#111111"/><clipPath id="satori_cp-id-0"><rect x="100" y="100" width="95" height="87"/></clipPath><mask id="satori_om-id-0"><rect x="100" y="100" width="95" height="87" fill="#fff"/></mask><image x="100" y="100" width="95" height="87" href="data:image/png;base64,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" preserveAspectRatio="none" clip-path="url(#satori_cp-id-0)" mask="url(#satori_om-id-0)"/><text x="100" y="281.60065915957153" width="371.0227272727273" height="121.02272727272728" font-weight="normal" font-style="normal" font-size="100" font-family="serif" fill="white">Product</text><text x="499.1477272727273" y="281.60065915957153" width="276.84659090909093" height="121.02272727272728" font-weight="normal" font-style="normal" font-size="100" font-family="serif" fill="white">Name</text><text x="100" y="402.60065915957153" width="371.0227272727273" height="121.02272727272728" font-weight="bold" font-style="normal" font-size="100" font-family="serif" fill="white">Product</text><text x="499.1477272727273" y="402.60065915957153" width="276.84659090909093" height="121.02272727272728" font-weight="bold" font-style="normal" font-size="100" font-family="serif" fill="white">Name</text></svg>`,
    ),
  )
    .png()
    .toBuffer()

  res.end(result)
}
